<div class="content-container">
    <div class="content-area" style="padding-top:0px">
        <div class="clr-row clr-align-items-center clr-justify-content-between">
        <div class="clr-col-md-5 clr-col-lg-3 clr-offset-sm-1">
            <div class="clr-row clr-align-items-center">
                <cds-icon shape="arrow" direction="left" size="lg" routerLink="/clients" class="back-arrow"></cds-icon>
                <span class="page-title">New Organisation</span>
            </div>
        </div>
        </div>
        <hr>
        <div class="clr-row">
        <form class="clr-col-sm-9 clr-offset-sm-1" clrForm [formGroup]="organisationDataForm" clrLayout="horizontal" (submit)="handleSubmit()">
            <div class="clr-row">
                <h3 class="subtitle">General data</h3>
            </div>
            <clr-combobox-container>
                <label>Organisation Type*</label>
                <clr-combobox name="organisationType" required formControlName="organisationType">
                    <clr-options>
                        <clr-option clrValue="Company">Company</clr-option>
                        <clr-option clrValue="Public Organisation">Public Organisation</clr-option>
                    </clr-options>
                </clr-combobox>
                <clr-control-error *clrIfError="'required'">This field is required</clr-control-error>
            </clr-combobox-container>
            <clr-input-container>
                <label for="name">
                    Name*
                </label>
                <input clrInput type="text" required id="name"
                        formControlName="name"/>
                <clr-control-error *clrIfError="'required'">
                This field is required
                </clr-control-error>
                <clr-control-error *clrIfError="'minlength'">
                The name must be at least 2 characters long
                </clr-control-error>
                <clr-control-error *clrIfError="'maxlength'">
                The name must not exceed 25 characters
                </clr-control-error>
                <clr-control-error *clrIfError="'pattern'">
                The name must contain only letters and one space or - is allowed between words
                </clr-control-error>
            </clr-input-container>
            <clr-input-container>
                <label for="contactName">
                    Contact Name*
                </label>
                <input clrInput type="text" required id="contactName"
                        formControlName="contactName"/>
                <clr-control-error *clrIfError="'required'">
                    This field is required
                </clr-control-error>
                <clr-control-error *clrIfError="'pattern'">
                    Contact name must contain only letters and one space or - is allowed between words
                </clr-control-error>
                <clr-control-error *clrIfError="'minlength'">
                    Contact name must be at least 2 characters long
                </clr-control-error>
                <clr-control-error *clrIfError="'maxlength'">
                    Contact name must not exceed 25 characters
                </clr-control-error>
            </clr-input-container>
            <clr-input-container>
                <label for="taxId">Tax Id*</label>
                <input clrInput type="text" id="taxId" formControlName="taxId"/>
                <clr-control-error *clrIfError="'required'">
                This field is required
            </clr-control-error>
            <clr-control-error *clrIfError="'pattern'">
                Tax Id must be composed of only 6 digits
            </clr-control-error>
            </clr-input-container>

            <div class="clr-row">
                <h3 class="subtitle">Address</h3>
            </div>
            <div class="clr-row">
                <clr-input-container>
                    <label for="street">
                        Street
                    </label>
                    <input clrInput type="text" id="street"
                            formControlName="street"/>
                    <clr-control-error *clrIfError="'minlength'">
                        Street must be at least 2 characters long
                    </clr-control-error>
                    <clr-control-error *clrIfError="'maxlength'">
                        Street must not exceed 30 characters
                    </clr-control-error>
                    <clr-control-error *clrIfError="'pattern'">
                      Street is invalid
                  </clr-control-error>
                </clr-input-container>
                <clr-input-container>
                    <label for="no">
                        No.
                    </label>
                    <input clrInput type="text" id="no"
                            formControlName="no"/>
                    <clr-control-error *clrIfError="'maxlength'">
                        No. must not exceed 10 characters
                    </clr-control-error>
                    <clr-control-error *clrIfError="'pattern'">
                      No. is invalid
                  </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-row">
                <clr-input-container>
                    <label for="building">
                        Building
                    </label>
                    <input clrInput type="text" id="building"
                            formControlName="building"/>
                    <clr-control-error *clrIfError="'maxlength'">
                        Building must not exceed 4 characters
                    </clr-control-error>
                    <clr-control-error *clrIfError="'pattern'">
                      Building is invalid
                  </clr-control-error>
                </clr-input-container>
                <clr-input-container>
                    <label for="ap">
                        Ap.
                    </label>
                    <input clrInput type="text" id="ap"
                            formControlName="ap"/>
                    <clr-control-error *clrIfError="'maxlength'">
                        Ap. must not exceed 4 characters
                    </clr-control-error>
                    <clr-control-error *clrIfError="'pattern'">
                      Ap. is invalid
                  </clr-control-error>
                </clr-input-container>
                <clr-input-container>
                    <label for="floor">
                        Floor
                    </label>
                    <input clrInput type="text" id="floor"
                            formControlName="floor"/>
                    <clr-control-error *clrIfError="'maxlength'">
                      Floor must not exceed 3 characters
                    </clr-control-error>
                    <clr-control-error *clrIfError="'pattern'">
                      Floor is invalid
                    </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-row">
                <clr-input-container>
                    <label for="postalCode"  class="clr-col-md-4">
                        Postal code
                    </label>
                    <input clrInput type="text" id="postalCode"
                            formControlName="postalCode" class="clr-col-md-8"/>
                    <clr-control-error *clrIfError="'minlength'">
                        Postal code must be at least 2 characters long
                    </clr-control-error>
                    <clr-control-error *clrIfError="'maxlength'">
                        Postal code must not exceed 10 characters
                    </clr-control-error>
                    <clr-control-error *clrIfError="'pattern'">
                      Postal code is invalid
                    </clr-control-error>
                </clr-input-container>
                <clr-combobox-container>
                    <label>City</label>
                    <clr-combobox name="city"  formControlName="city" (clrOpenChange)="getCities($event)" [clrLoading]="cities.length != 0? false : true" >
                        <clr-options>
                            <clr-option [clrValue]="city" *clrOptionItems="let city of cities">{{city}}</clr-option>
                        </clr-options>
                        <clr-control-error *ngIf="countryFirst">Country needs to be selected first</clr-control-error>
                    </clr-combobox>
                    <clr-control-error *clrIfError="'minlength'">
                        City must be at least 1 characters long
                    </clr-control-error>
                    <clr-control-error *clrIfError="'maxlength'">
                        City must not exceed 60 characters
                    </clr-control-error>
                </clr-combobox-container>
                <clr-combobox-container>
                    <label>Country</label>
                    <clr-combobox name="country" formControlName="country" (clrOpenChange)="getCountries()" (clrInputChange)="onCountryChange()" [clrLoading]="countries.length != 0? false : true"  >
                        <clr-options>
                            <clr-option [clrValue]="country" *clrOptionItems="let country of countries">{{country}}</clr-option>
                        </clr-options>
                    </clr-combobox>
                    <clr-control-error *clrIfError="'minlength'">
                        Country must be at least 1 characters long
                    </clr-control-error>
                    <clr-control-error *clrIfError="'maxlength'">
                        Country must not exceed 60 characters
                    </clr-control-error>
                </clr-combobox-container>
            </div>
            <div class="clr-row">
                <h3 class="subtitle">Contact</h3>
            </div>
            <div class="clr-row">
                <clr-input-container>
                    <label for="email" class="clr-col-md-4">
                        Email Address
                    </label>
                    <input clrInput type="text" id="email" (focus)="onPhoneEmailFocus()" (blur)="onPhoneEmailBlur()"
                            formControlName="email" class="clr-col-md-8"/>
                    <clr-control-error *clrIfError="'pattern'">
                        Please enter a valid email address.
                    </clr-control-error>
                    <clr-control-error *clrIfError="'emailOrPhone'">
                        Email or phone number is required
                    </clr-control-error>
                </clr-input-container>
                <clr-input-container>
                    <label for="phone" class="clr-col-md-4">
                        Telephone
                    </label>
                    <input clrInput type="text" id="phone" (focus)="onPhoneEmailFocus()" (blur)="onPhoneEmailBlur()"
                            formControlName="phone" class="clr-col-md-8"/>
                    <clr-control-error *clrIfError="'pattern'">
                        Phone number is invalid
                    </clr-control-error>
                    <clr-control-error *clrIfError="'emailOrPhone'">
                        Email or phone number is required
                    </clr-control-error>
                    <clr-control-error *clrIfError="'minlength'">
                      Phone number must be at least 3 characters long
                  </clr-control-error>
                  <clr-control-error *clrIfError="'maxlength'">
                    Phone number must not exceed 20 characters
                  </clr-control-error>
                </clr-input-container>
            </div>
            <div class="clr-row" style="margin-top:24px">
                <button class="btn btn-primary clr-col-sm-3 clr-col-3 clr-col-md-3 .clr-col-lg-2 .clr-col-xl-2" type="submit">Register</button>
            </div>
        </form>
        </div>
        <clr-alert class="alert" clrAlertType="danger" [clrAlertAppLevel]="true" [clrAlertClosable]="true" *ngIf="errorMessage.length != 0" (clrAlertClosedChange)="onClose()">
        <em>{{errorMessage}}</em>
        </clr-alert>
    </div>
</div>
